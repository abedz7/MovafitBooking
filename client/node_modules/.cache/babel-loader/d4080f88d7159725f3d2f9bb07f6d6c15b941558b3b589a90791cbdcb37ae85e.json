{"ast":null,"code":"import _objectSpread from\"C:/Users/ASUS ZEN BOOK/Desktop/MovafitBooking/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useState,useEffect}from'react';import toast from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[token,setToken]=useState(localStorage.getItem('token'));useEffect(()=>{if(token){checkAuthStatus();}else{setLoading(false);}},[token]);const checkAuthStatus=async()=>{try{// Simulate API call delay\nawait new Promise(resolve=>setTimeout(resolve,500));// Mock user data for demo\nconst mockUser={_id:'1',firstName:'יוסי',lastName:'כהן',email:'demo@example.com',phone:'0501111111',gender:'male',role:'user'};setUser(mockUser);}catch(error){localStorage.removeItem('token');setToken(null);}finally{setLoading(false);}};const login=async(email,password)=>{try{// Simulate API call delay\nawait new Promise(resolve=>setTimeout(resolve,1000));// Mock login - accept any email/password for demo\nconst mockUser={_id:'1',firstName:'יוסי',lastName:'כהן',email:email,phone:'0501111111',gender:'male',role:'user'};const mockToken='mock-jwt-token-'+Date.now();localStorage.setItem('token',mockToken);setToken(mockToken);setUser(mockUser);toast.success('התחברת בהצלחה!');return true;}catch(error){toast.error('שגיאה בהתחברות');return false;}};const register=async userData=>{try{// Simulate API call delay\nawait new Promise(resolve=>setTimeout(resolve,1000));// Mock registration\nconst mockUser={_id:Date.now().toString(),firstName:userData.firstName,lastName:userData.lastName,email:userData.email,phone:userData.phone,gender:userData.gender,role:'user'};const mockToken='mock-jwt-token-'+Date.now();localStorage.setItem('token',mockToken);setToken(mockToken);setUser(mockUser);toast.success('נרשמת בהצלחה!');return true;}catch(error){toast.error('שגיאה בהרשמה');return false;}};const logout=()=>{localStorage.removeItem('token');setToken(null);setUser(null);toast.success('התנתקת בהצלחה');};const updateProfile=async updatedData=>{try{// Simulate API call delay\nawait new Promise(resolve=>setTimeout(resolve,500));// Update user with new data\nsetUser(prev=>_objectSpread(_objectSpread({},prev),updatedData));toast.success('הפרופיל עודכן בהצלחה!');return true;}catch(error){toast.error('שגיאה בעדכון הפרופיל');return false;}};const value={user,loading,token,login,register,logout,updateProfile,isAuthenticated:!!user};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","toast","jsx","_jsx","AuthContext","useAuth","context","Error","AuthProvider","_ref","children","user","setUser","loading","setLoading","token","setToken","localStorage","getItem","checkAuthStatus","Promise","resolve","setTimeout","mockUser","_id","firstName","lastName","email","phone","gender","role","error","removeItem","login","password","mockToken","Date","now","setItem","success","register","userData","toString","logout","updateProfile","updatedData","prev","_objectSpread","value","isAuthenticated","Provider"],"sources":["C:/Users/ASUS ZEN BOOK/Desktop/MovafitBooking/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [token, setToken] = useState(localStorage.getItem('token'));\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      checkAuthStatus();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [token]);\r\n\r\n  const checkAuthStatus = async () => {\r\n    try {\r\n      // Simulate API call delay\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      // Mock user data for demo\r\n      const mockUser = {\r\n        _id: '1',\r\n        firstName: 'יוסי',\r\n        lastName: 'כהן',\r\n        email: 'demo@example.com',\r\n        phone: '0501111111',\r\n        gender: 'male',\r\n        role: 'user'\r\n      };\r\n      setUser(mockUser);\r\n    } catch (error) {\r\n      localStorage.removeItem('token');\r\n      setToken(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const login = async (email, password) => {\r\n    try {\r\n      // Simulate API call delay\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      // Mock login - accept any email/password for demo\r\n      const mockUser = {\r\n        _id: '1',\r\n        firstName: 'יוסי',\r\n        lastName: 'כהן',\r\n        email: email,\r\n        phone: '0501111111',\r\n        gender: 'male',\r\n        role: 'user'\r\n      };\r\n      \r\n      const mockToken = 'mock-jwt-token-' + Date.now();\r\n      localStorage.setItem('token', mockToken);\r\n      setToken(mockToken);\r\n      setUser(mockUser);\r\n      toast.success('התחברת בהצלחה!');\r\n      return true;\r\n    } catch (error) {\r\n      toast.error('שגיאה בהתחברות');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const register = async (userData) => {\r\n    try {\r\n      // Simulate API call delay\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      // Mock registration\r\n      const mockUser = {\r\n        _id: Date.now().toString(),\r\n        firstName: userData.firstName,\r\n        lastName: userData.lastName,\r\n        email: userData.email,\r\n        phone: userData.phone,\r\n        gender: userData.gender,\r\n        role: 'user'\r\n      };\r\n      \r\n      const mockToken = 'mock-jwt-token-' + Date.now();\r\n      localStorage.setItem('token', mockToken);\r\n      setToken(mockToken);\r\n      setUser(mockUser);\r\n      toast.success('נרשמת בהצלחה!');\r\n      return true;\r\n    } catch (error) {\r\n      toast.error('שגיאה בהרשמה');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('token');\r\n    setToken(null);\r\n    setUser(null);\r\n    toast.success('התנתקת בהצלחה');\r\n  };\r\n\r\n  const updateProfile = async (updatedData) => {\r\n    try {\r\n      // Simulate API call delay\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      // Update user with new data\r\n      setUser(prev => ({ ...prev, ...updatedData }));\r\n      toast.success('הפרופיל עודכן בהצלחה!');\r\n      return true;\r\n    } catch (error) {\r\n      toast.error('שגיאה בעדכון הפרופיל');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    loading,\r\n    token,\r\n    login,\r\n    register,\r\n    logout,\r\n    updateProfile,\r\n    isAuthenticated: !!user\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}